{% extends 'base.html' %}

{% block title %}Ошибка CSRF{% endblock %}

{% block content %}
<h1>Ошибка проверки CSRF (403)</h1>
<div class="info-box">
    <h3>Что произошло?</h3>
    <p>Запрос был отклонен из-за ошибки проверки CSRF токена.</p>
    <p><strong>Причина:</strong> {{ reason }}</p>
    
    <h3>Решение проблемы:</h3>
    <ol>
        <li>Убедитесь, что ваш браузер принимает cookies.</li>
        <li>Попробуйте обновить страницу и повторить действия.</li>
        <li>Если вы вошли в систему в другой вкладке или использовали кнопку "Назад", 
            токен безопасности мог быть изменен. Обновите страницу с формой.</li>
    </ol>
    
    <p>В целях безопасности, Django требует проверку CSRF-токена для всех POST-запросов.</p>
    
    <div class="action-buttons">
        <a href="javascript:history.back()" class="btn">Вернуться назад</a>
        <a href="/" class="btn">На главную</a>
    </div>
</div>

<div class="info-box">
    <h3>Технические детали (для разработчиков):</h3>
    <p>Убедитесь, что в шаблоне формы есть тег {% raw %}{% csrf_token %}{% endraw %}.</p>
    <p>Текущий CSRF токен: <code>{{ csrf_token }}</code></p>
</div>
{% endblock %}
